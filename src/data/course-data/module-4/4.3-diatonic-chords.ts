/**
 * Module 4, Submodule 4.3: H·ª£p √¢m trong gi·ªçng (Diatonic Chords)
 */
import type { Submodule } from '../types'

export const SUBMODULE_4_3: Submodule = {
  id: '4.3',
  title: 'H·ª£p √¢m trong gi·ªçng',
  description: 'X√¢y d·ª±ng 7 h·ª£p √¢m t·ª´ 7 b·∫≠c c·ªßa √¢m giai v√† quy lu·∫≠t I-ii-iii-IV-V-vi-vii¬∞',
  sections: ['theory', 'abcDemo'],
  theoryContent: `
## 1. Diatonic Chords l√† g√¨?

### ƒê·ªãnh nghƒ©a

**Diatonic Chords** l√† c√°c h·ª£p √¢m ƒë∆∞·ª£c x√¢y d·ª±ng ch·ªâ t·ª´ c√°c n·ªët **trong m·ªôt √¢m giai** (scale).

> üéµ M·ªói b·∫≠c c·ªßa scale = m·ªôt h·ª£p √¢m ‚Üí 7 b·∫≠c = 7 h·ª£p √¢m!

{{quiz:Diatonic Chords l√† g√¨?|H·ª£p √¢m c√≥ 7 n·ªët;*H·ª£p √¢m x√¢y t·ª´ c√°c n·ªët trong √¢m giai;H·ª£p √¢m ngo√†i √¢m giai|Diatonic = ch·ªâ d√πng n·ªët trong scale ƒë·ªÉ x√¢y h·ª£p √¢m}}

---

## 2. X√¢y d·ª±ng t·ª´ C Major Scale

### Quy tr√¨nh

1. L·∫•y 7 n·ªët c·ªßa C Major: C-D-E-F-G-A-B
2. T·ª´ **m·ªói n·ªët**, ch·ªìng qu√£ng 3 l√™n
3. Ch·ªâ d√πng n·ªët **trong scale**

### K·∫øt qu·∫£: 7 h·ª£p √¢m

| B·∫≠c | Root | H·ª£p √¢m | T√≠nh ch·∫•t |
|-----|------|--------|-----------|
| I | C | C-E-G | **Major** |
| ii | D | D-F-A | **minor** |
| iii | E | E-G-B | **minor** |
| IV | F | F-A-C | **Major** |
| V | G | G-B-D | **Major** |
| vi | A | A-C-E | **minor** |
| vii¬∞ | B | B-D-F | **diminished** |

{{abc:7 Diatonic Chords trong C Major|X:1
M:4/4
L:1/2
K:C
[CEG] [DFA] | [EGB] [FAc] | [GBd] [Ace] | [Bdf]2|]}}

---

## 3. Quy lu·∫≠t M-m-m-M-M-m-dim

### Pattern b·∫•t bi·∫øn

Trong **M·ªåI** gi·ªçng tr∆∞·ªüng:

> **I - ii - iii - IV - V - vi - vii¬∞**
> 
> **M - m - m - M - M - m - dim**

| S·ªë La M√£ | T√≠nh ch·∫•t | Ghi nh·ªõ |
|----------|-----------|---------|
| **I, IV, V** | Major (ch·ªØ hoa) | "3 anh c·∫£" |
| **ii, iii, vi** | minor (ch·ªØ th∆∞·ªùng) | "3 em √∫t" |
| **vii¬∞** | diminished | "N·ªët l·∫ª" |

{{quiz:Pattern t√≠nh ch·∫•t c·ªßa 7 h·ª£p √¢m trong gi·ªçng Tr∆∞·ªüng l√† g√¨?|M-M-M-M-M-M-M;*M-m-m-M-M-m-dim;m-m-m-m-m-m-M|M-m-m-M-M-m-dim. I, IV, V = Major; ii, iii, vi = minor; vii¬∞ = dim}}

---

## 4. "3 Anh C·∫£" - Primary Chords

### I, IV, V

Ba h·ª£p √¢m **quan tr·ªçng nh·∫•t** trong b·∫•t k·ª≥ gi·ªçng n√†o:

| B·∫≠c | T√™n g·ªçi | Vai tr√≤ |
|-----|---------|---------|
| **I** | Tonic | "Nh√†" - ƒëi·ªÉm kh·ªüi ƒë·∫ßu/k·∫øt th√∫c |
| **IV** | Subdominant | "ƒêi xa" - t·∫°o movement |
| **V** | Dominant | "Mu·ªën v·ªÅ" - d·∫´n v·ªÅ I |

{{abc:I-IV-V-I trong C Major|X:1
M:4/4
L:1/1
K:C
[CEG] | [FAc] | [GBd] | [CEG]|]}}

> üé∏ H√†ng ng√†n b√†i h√°t ch·ªâ d√πng 3 h·ª£p √¢m n√†y!

{{quiz:"3 Anh C·∫£" - Primary Chords l√† nh·ªØng b·∫≠c n√†o?|ii, iii, vi;*I, IV, V;I, II, III|I (Tonic), IV (Subdominant), V (Dominant) l√† 3 h·ª£p √¢m quan tr·ªçng nh·∫•t}}

---

## 5. V√≠ d·ª•: G Major Diatonic

| B·∫≠c | H·ª£p √¢m | N·ªët |
|-----|--------|-----|
| I | **G** | G-B-D |
| ii | **Am** | A-C-E |
| iii | **Bm** | B-D-F# |
| IV | **C** | C-E-G |
| V | **D** | D-F#-A |
| vi | **Em** | E-G-B |
| vii¬∞ | **F#dim** | F#-A-C |

{{abc:Diatonic Chords trong G Major|X:1
M:4/4
L:1/2
K:G
[GBd] [Ace] | [Bd^f] [ceg] | [d^fa] [egb] | [^fac]2|]}}

---

## 6. T·∫°i sao vii¬∞ l√† Diminished?

### Ph√¢n t√≠ch

Trong C Major, b·∫≠c 7 = B:
- B ‚Üí D = m3 (3 semitones)
- D ‚Üí F = m3 (3 semitones)
- B ‚Üí F = **Tritone** (6 semitones)!

{{abc:B diminished: C√≥ tritone B-F|X:1
L:1/1
K:C
[Bdf]|]}}

> üò± vii¬∞ lu√¥n diminished v√¨ n√≥ ch·ª©a **tritone** gi·ªØa b·∫≠c 7 v√† b·∫≠c 4!

---

## 7. ·ª®ng d·ª•ng: Ch·ªçn h·ª£p √¢m ƒë·ªám

### Bi·∫øt gi·ªçng ‚Üí Bi·∫øt h·ª£p √¢m kh·∫£ d·ª•ng

N·∫øu b√†i h√°t ·ªü **C Major**, b·∫°n c√≥ th·ªÉ d√πng:
- C, Dm, Em, F, G, Am (tr√°nh Bdim tr·ª´ khi c·∫ßn tension)

### Chord Substitution

C√°c chord c√πng ch·ª©c nƒÉng c√≥ th·ªÉ thay th·∫ø nhau:
- Tonic: I, iii, vi
- Subdominant: ii, IV
- Dominant: V, vii¬∞

---

## üéØ T√≥m t·∫Øt

1. **Diatonic chords** = h·ª£p √¢m x√¢y t·ª´ scale
2. 7 b·∫≠c ‚Üí **7 h·ª£p √¢m**
3. Pattern: **M-m-m-M-M-m-dim**
4. **I, IV, V** = Primary chords (quan tr·ªçng nh·∫•t)
5. **vii¬∞** lu√¥n diminished (c√≥ tritone)

> üí° **M·∫πo**: Nh·ªõ "**1-4-5** l√† ƒë·∫°i ca, **2-3-6** l√† th·ª© nh·ªè, **7** l√† dim!"
  `,
  abcDemos: [
    {
      id: '4.3.1',
      title: 'Building Diatonic Chords',
      description:
        'Animation step-by-step: T·ª´ m·ªói n·ªët trong C Major, ch·ªìng qu√£ng 3 l√™n. K·∫øt qu·∫£: 7 h·ª£p √¢m v·ªõi pattern M-m-m-M-M-m-dim.',
      abc: `X:1
M:4/4
L:1/2
K:C
[CEG] [DFA] | [EGB] [FAc] | [GBd] [Ace] | [Bdf]2|]`,
      interactive: true,
      playable: true,
    },
    {
      id: '4.3.2',
      title: 'I-IV-V Primary Chords',
      description:
        '3 h·ª£p √¢m ch√≠nh: I (Tonic - nh√†), IV (Subdominant - ƒëi xa), V (Dominant - mu·ªën v·ªÅ). ƒê·ªß ƒë·ªÉ ƒë·ªám h√†ng ng√†n b√†i h√°t!',
      abc: `X:1
M:4/4
L:1/1
K:C
[CEG] | [FAc] | [GBd] | [CEG]|]`,
      interactive: true,
      playable: true,
    },
    {
      id: '4.3.3',
      title: 'vii¬∞ Diminished',
      description:
        'Bdim trong C Major: B-D-F ch·ª©a tritone (B-F = 6 semitones). ƒê√¢y l√† chord "cƒÉng th·∫≥ng nh·∫•t" trong scale, th∆∞·ªùng d·∫´n v·ªÅ I.',
      abc: `X:1
M:4/4
L:1/1
K:C
[Bdf] | [CEG]|]`,
      interactive: true,
      playable: true,
    },
    {
      id: '4.3.4',
      title: 'Key of G Diatonic',
      description:
        'G-Am-Bm-C-D-Em-F#dim: C√πng pattern M-m-m-M-M-m-dim, ch·ªâ kh√°c n·ªët. Quy lu·∫≠t n√†y ho·∫°t ƒë·ªông cho M·ªåI gi·ªçng tr∆∞·ªüng!',
      abc: `X:1
M:4/4
L:1/2
K:G
[GBd] [Ace] | [Bd^f] [ceg] | [d^fa] [egb]|]`,
      interactive: true,
      playable: true,
    },
  ],
  exercises: [{ type: 'chord', questionCount: 5 }],
}
